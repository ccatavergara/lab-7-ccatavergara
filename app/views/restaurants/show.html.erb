<script>
function totalIt()
{
  var input = document.getElementsByName("product");
  var total = 0;
  for (var i = 0; i < input.length; i++)
  {
      if (input[i].checked)
      {
        total += parseFloat(input[i].value);
      }
  }
  document.getElementById("total").value = "$" + total.toFixed(2);
}

</script>

<div style='margin-left:3rem;'><%= link_to "", restaurants_path, class: "btn btn-outline-dark fa-solid fa-arrow-left" %></div>

<div class='container' style='margin:auto; background-color: rgb(0 0 0/0%); width: 30rem;'>

  <div class="card text-center" style='width:25rem;'>
    <%= render @restaurant%>
  </div>
  <br>

  <div class="container text-center" style='width:20rem;'>
  <h5><strong>Items</strong></h5>
    <% @restaurant.items.each do |item| %>
      <div class="form-check text-center">
        <input class="form-check-input" type="checkbox" name='product' value="<%= item.price %>" onclick='totalIt()'>
        <label class="form-check-label" for="item-<%= item.id %>">
          <%= item.name %>
          <br>

          <div class='mb-2 text-muted'>$<%= item.price%></div>
        </label>
      </div>
    <% end %>
    <br>
    <h6><strong>Total price:</strong></h6>
    <input class='container' style='width:8rem; background-color:#dee2e6;' value="$0.00" readonly="readonly" id="total"/>
</div>
    <br>
    <br>
    <% if can? :manage, Restaurant %>
      <%= link_to "", edit_restaurant_path(@restaurant), class: "btn btn-outline-warning fa-solid fa-pencil" %>
    <% end %>
    <br> <br>
    <% if can? :manage, Restaurant %>
      <%= button_to "", @restaurant, method: :delete , class: "btn btn-outline-danger fa-solid fa-trash"%>
    <% end %>

  </div>
</div>
